{% extends "base.html" %}
{% load static %}

{% block head %}
  <title>Covid-19 Trends in South Africa</title>
{% endblock %}

{% block suntitle %}
<h2 class="subtitle">Effective Reproduction Number</h2>
{% endblock %}

{% block content %}

<div class="container">

  <section class="section">
    <div class="columns is-mobile has-text-centered">
      <div class="column">
        <div class="box">
          <p class="heading">South African Covid-19 Summary</p>
        </div>
      </div>
    </div>

    <div class="columns is-mobile has-text-centered">
      <div class="column is-one-third">
        <div class="box">
          <p class="heading">Total Cases</p>
          <p class="title">{{ content.cases }}</p>
        </div>
      </div>
      <div class="column is-one-third">
        <div class="box">
          <p class="heading">Total Recovered</p>
          <p class="title">{{ content.recovered }}</p> 
        </div>
      </div>
      <div class="column is-one-third">
        <div class="box">
          <p class="heading">Total Active</p>
          <p class="title">{{ content.active }}</p> 
        </div>
      </div>
    </div>

    <div class="columns is-mobile has-text-centered">
      <div class="column is-one-third">
        <div class="box">
          <p class="heading">Total Tests</p>
          <p class="title">{{ content.tests }}</p> 
        </div>
      </div>
      <div class="column is-one-third">
        <div class="box">
          <p class="heading">Total Deaths</p>
          <p class="title">{{ content.deaths }}</p> 
        </div>
      </div>
      <div class="column is-one-third">
        <div class="box">
          <p class="heading">Reproduction No.</p>
          <p class="title">{{ content.latest_rt}}</p> 
        </div>
      </div>
    </div>

    <div class="content">
      Case data last updated on <strong>{{ content.latest_date }}</strong>.
    </div>
    <div class="content is-size-7">
      All the Covid-19 data are curated and verified by the <a href="#ref1">DSFSI</a>.
      Thus, there is a delay from the data announced by the various government departments.
    </div>
    
    <div class="sharethis-inline-share-buttons"></div><br>
  </section>
</div>

  <section class="hero is-primary is-bold">
    <div class="container">
      <div class="hero-body">
          <h1 class="title">Take Action!</h1>
          <h2 class="subtitle">Download the COVID Alert SA app</h2>
          <div>
            <a href="https://apps.apple.com/app/apple-store/id1524618326?mt=8" target="_blank"><img src="{% static "app-store-badge.png" %}" height="25"></img></a>
            <a href="https://play.google.com/store/apps/details?id=za.gov.health.covidconnect" target="_blank"><img src="{% static "google-play-badge.png" %}" height="25"></img></a>        
          </div>
          <div class="content">
            <ul>
              <li>Google and Apple teamed up to provide a shared platform to track the spread of Covid-19 around the world, called COVID-19 Exposure Logging.</li>
              <li>The Department of Health's COVID-19 Alert app makes use of this platform to implement a track and tracing solution.</li>
              <li>Via Bluetooth, the app will alert you if you have passed someone that had Covid-19 in the last 14 days.</li>
              <li>All data is anonymously collected, processed and stored. You are identified only with a unique identifier on the platform.</li>
              <li>With experience in data security, the author of this website cannot endorse a better solution!</li>
            </ul>
          </div>
      </div>
    </div>
  </section>

<div class="container">

  <section class="section">
    <div class="content">To find out how fast Covid-19 is spreading, we can
      calculate the Effective Reproduction Number (<strong>Rt</strong>) as the pandemic progresses. This number tells us,
      on average, how many people each infected person is likely to infect.</div>
    <div class="content">For as long as Rt is above 1, the virus is spreading rapidly.
      The challenge is to get Rt below 1 to stop the spread.</div>
    <div class="content">This website provides up to date Rt charts for the
      country, provinces, districts and subdistricts (where data is available).
      Only areas with significant spreading will be shown.</div>
  </section>

</div>

<section class="hero is-warning is-bold">
  <div class="container">
    <div class="hero-body">
        <h2 class="subtitle">With enough applied knowledge we can beat the virus!</h2>
    </div>
  </div>
</section>

<div class="container">

  <section class="section">
    <div class="content">
      The latest Rt value for the country is <strong>{{ content.latest_rt }}</strong>,
      last calculated on {{ content.latest_rt2date }}. This means that each newly infected
      person is likely to infect {{ content.latest_rt }} more people.
    </div>
  </section>

  <section class="section">
      <div class="content">{{ content.plot_rt_country|safe }}</div>
  </section>

  <section class="hero is-danger is-bold">
    <div class="hero-body">
      <div class="content">
        <h3 class="subtitle">The following assumptions were applied to calculate the trends</h3>
        <ol>
          <li>Where testing data is available, an advanced multi-variable model can be used.</li>
          <li>Applies to South Africa country Rt plot.</li>
          <li>Testing and case data are the two input dimensions for the model.</li>
          <li>Considering 10 days for the virus to incubate, all case data are back-dated.</li>
          <li>The error bands indicate the 80% credibility interval.</li>
          <li>Forecasted plots will use the latest calculated Rt from this model.</li>
        </ol>
    </div>
  </section>

  <section class="section">
      <div class="content"><a href="rtmodel1">Get</a> the first version of the Rt model for South Africa.</div>
  </section>

</div>

<section class="hero is-dark is-bold">
  <div class="container">
    <div class="hero-body">
        <h2 class="subtitle">Breakdown of Covid-19 Data</h2>
    </div>
  </div>
</section>

<div class="container">


  <section class="section">
    <div class="content">{{ content.plot_analsysis_prov|safe }}</div>
  </section>

  <section class="hero is-info is-bold">
    <div class="hero-body">
        <h2 class="subtitle">Tips</h2>
        <div class="content">
          <ul>
            <li>You can interact with all the plots. </li>
            <li>Use the home icon (<span class="icon"><i class="fas fa-home"></i></span>) to reset the plot to its original zoom.</li>
            <li>Move the slider to see the effect of different types of data.</li>
            <li>Use the arrows icon (<span class="icon"><i class="fas fa-expand-arrows-alt"></i></span>) to auto zoom if changes on the plot seem to small.</li>
          </ul>
        </div>
    </div>
  </section>

  <section class="section">
      <div class="content">{{ content.plot_analsysis_deaths|safe }}</div>
      <div class="content">{{ content.plot_analysis_sa|safe }}</div>
      <div class="content">{{ content.plot_analsysis_prov2|safe }}</div>
      <div class="content">{{ content.plot_daily_sa|safe }}</div>
  </section>

  <section class="hero is-info is-bold">
    <div class="hero-body">
      <h2 class="subtitle">Tip</h2>
      <div class="content">
        <ul>
          <li>Hide the data line in the legend if the plot looks to busy.</li>
        </ul>
      </div>

  </section>
  <section class="section">
      <div class="content">{{ content.plot_daily_prov|safe }}</div>
  </section>

</div>


<section class="hero is-warning is-bold">
  <div class="container">
    <div class="hero-body">
        <h2 class="subtitle">Forecast</h2>
    </div>
  </div>
</section>

<div class="container">

  <div id="output_box">
    <br>
    <section class="hero is-link is-bold">
      <div class="hero-body">
        <div class="container">
          <h2 class="subtitle">Crunching the latest numbers...</h2>
          <progress class="progress is-large is-info" max="100"></progress>
        </div>
      </div>
    </section>
  </div>
  
  <script>
    $(document).ready(function() {
      $('#output_box').load('/forecast/')
    });
  </script>

</div>

{% endblock %}
